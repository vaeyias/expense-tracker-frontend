---
timestamp: 'Tue Oct 21 2025 00:08:12 GMT-0400 (Eastern Daylight Time)'
parent: '[[..\20251021_000812.2adf6c7a.md]]'
content_id: 0bbb847f40be9804a95c3c4771bc91c2ab0e52fa73a2e837486dcc21c8585e43
---

# debt-styling

<script setup lang="ts">
import { ref, onMounted, computed } from 'vue'
import axios from 'axios'
import { useUserStore } from '../stores/user'

// ---------- STATE ----------
const userStore = useUserStore()
const currentUser = computed(() => userStore.currentUser?._id || '')

interface Debt {
  _id: string
  userA: { _id: string; displayName: string }
  userB: { _id: string; displayName: string }
  balance: number
}

const debts = ref<Debt[]>([])
const errorMsg = ref('')

// For recording payment
const showPaymentModal = ref(false)
const selectedDebt = ref<Debt | null>(null)
const paymentAmount = ref<number | null>(null)

// ---------- LOAD DEBTS ----------
const loadDebts = async () => {
  if (!currentUser.value) return
  try {
    const res = await axios.post('http://localhost:8000/api/Debt/_listDebtsForUser', {
      user: currentUser.value
    })
    const rawDebts = Array.isArray(res.data) ? res.data : []

    const debtsWithUsers = []
    for (const d of rawDebts) {
      const userARes = await axios.post('http://localhost:8000/api/Authentication/_getUserById', { user: d.userA })
      const userBRes = await axios.post('http://localhost:8000/api/Authentication/_getUserById', { user: d.userB })

      const userA = userARes.data?.userInfo || { _id: d.userA, displayName: 'Unknown' }
      const userB = userBRes.data?.userInfo || { _id: d.userB, displayName: 'Unknown' }

      debtsWithUsers.push({ ...d, userA, userB })
    }

    debts.value = debtsWithUsers
  } catch (err) {
    console.error('Error loading debts', err)
  }
}



// ---------- RECORD PAYMENT ----------
const paymentDirection = ref<'youPay' | 'theyPay'>('youPay') // default selection

const openPaymentModal = (debt: Debt) => {
  selectedDebt.value = debt
  paymentAmount.value = null
  paymentDirection.value = 'youPay'
  showPaymentModal.value = true
}
const recordPayment = async () => {
  if (!selectedDebt.value || !paymentAmount.value || paymentAmount.value <= 0) {
    errorMsg.value = 'Please enter a positive amount';
    return
  }

  const debt = selectedDebt.value
  let payer = ''
  let receiver = ''

  if (paymentDirection.value === 'youPay') {
    payer = currentUser.value
    receiver = debt.userA._id === currentUser.value ? debt.userB._id : debt.userA._id
  } else {
    receiver = currentUser.value
    payer = debt.userA._id === currentUser.value ? debt.userB._id : debt.userA._id
  }

  try {
    const res = await axios.post('http://localhost:8000/api/Debt/updateDebt', {
      payer,
      receiver,
      amount: paymentAmount.value
    })
    if (res.data.error) {
      errorMsg.value = res.data.error
      return
    }

    showPaymentModal.value = false
    await loadDebts()
  } catch (err) {
    console.error('Error recording payment', err)
  }
}

onMounted(loadDebts)
</script>

<template>
  <div>
    <h2>Your Debts</h2>
    <p v-if="debts.length === 0">No outstanding debts.</p>

```
<ul v-else>
  <li v-for="debt in debts" :key="debt._id" @click="openPaymentModal(debt)" class="debt-row">
    <span v-if="debt.userA === currentUser">
      <span v-if="debt.balance > 0">
        You owe {{ debt.userB.displayName }}: ${{ debt.balance.toFixed(2) }}
      </span>
      <span v-else>
        {{ debt.userB.displayName }} owes you: ${{ (-debt.balance).toFixed(2) }}
      </span>
    </span>
    <span v-else>
      <span v-if="debt.balance > 0">
        {{ debt.userA.displayName }} owes you: ${{ debt.balance.toFixed(2) }}
      </span>
      <span v-else>
        You owe {{ debt.userA.displayName }}: ${{ (-debt.balance).toFixed(2) }}
      </span>
    </span>
  </li>
</ul>
```

<!-- Payment Modal -->

<div v-if="showPaymentModal" class="modal-overlay">
  <div class="modal">
    <h3>Record Payment</h3>

```
<!-- Payment direction row -->
<div class="payment-direction">
  <span class="user-label">You</span>
  <select v-model="paymentDirection" class="direction-select">
    <option value="youPay">→</option>
    <option value="theyPay">←</option>
  </select>
  <span class="user-label">
    {{
      selectedDebt?.userA._id === currentUser
        ? selectedDebt.userB.displayName
        : selectedDebt.userA.displayName
    }}
  </span>
</div>

<!-- Payment amount -->
<input
  v-model.number="paymentAmount"
  type="number"
  min="0"
  placeholder="Payment Amount"
  class="payment-input"
/>

<!-- Error message -->
<p class="error" v-if="errorMsg">{{ errorMsg }}</p>

<!-- Buttons -->
<div class="modal-buttons">
  <button class="submit-btn" @click="recordPayment">Submit</button>
  <button class="cancel-btn" @click="showPaymentModal = false">Cancel</button>
</div>
```

  </div>
</div>

  </div>
</template>

<style scoped>

div {
    color:black;
}
.debt-row {
  cursor: pointer;
  padding: 0.5rem;
  border-bottom: 1px solid #ccc;
}
.debt-row:hover {
  background-color: #f0f0f0;
}
.modal-overlay {
  position: fixed;
  inset: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: rgba(0,0,0,0.6);
  z-index: 2000;
}

.modal {
  background: #fff;
  padding: 2rem;
  border-radius: 12px;
  width: 400px;
  max-width: 90%;
  box-shadow: 0 4px 20px rgba(0,0,0,0.2);
}

.payment-direction {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-weight: 500;
  margin-bottom: 1rem;
}

.user-label {
  flex: 1;
  text-align: center;
  font-size: 1rem;
}

.direction-select {
  padding: 0.25rem 0.5rem;
  font-size: 1.2rem;
  border-radius: 6px;
  border: 1px solid #ccc;
  cursor: pointer;
}

.payment-input {
  width: 100%;
  padding: 0.5rem;
  margin-bottom: 0.5rem;
  border-radius: 6px;
  border: 1px solid #ccc;
  font-size: 1rem;
}

.modal-buttons {
  display: flex;
  justify-content: flex-end;
  gap: 0.75rem;
  margin-top: 1rem;
}

.submit-btn {
  background-color: #4CAF50;
  color: white;
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-weight: 500;
}

.submit-btn:hover {
  background-color: #45a049;
}

.cancel-btn {
  background-color: #f44336;
  color: white;
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-weight: 500;
}

.cancel-btn:hover {
  background-color: #d32f2f;
}

.error {
  color: #d32f2f;
  margin-top: 0.25rem;
  font-size: 0.9rem;
}
</style>

prompt: make the styling cleaner
